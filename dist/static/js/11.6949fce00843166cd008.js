webpackJsonp([11],{AJR8:function(e,t){},K8tk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("YCzC"),n=a("4fsh"),i={name:"system_usermanagement_login_config",data:function(){return{labelPosition:"right",fail_countRules:[{validate:function(e){return!!e},message:"限制次数不能为空"},{validate:function(e){return e>0&&e<11},message:"限制次数至少为一次且不能超过十次"}],fail_timeRules:[{validate:function(e){return!!e},message:"限制时间不能为空"}],formData:{fail_count:"",fail_time:"",type:"login"},dropDownData:{fail_time:[{value:"900",name:"一刻钟"},{value:"1800‬",name:"半小时"},{value:"3600",name:"一小时"},{value:"7200",name:"二小时"},{value:"14400",name:"四小时"},{value:"21600",name:"六小时"},{value:"28800",name:"八小时"},{value:"43200",name:"十二小时"},{value:"86400",name:"二十四小时"}]}}},props:{layerid:{type:String}},created:function(){this.__getConfig({type:"login"})},methods:{submitEdit:function(){var e=this;this.$refs.system_usermanagement_login_config.validate().then(function(t){t&&e.$isShowTip("system","system_usermanagement","确定修改吗?",function(){e.__setConfig(e.formData)},e)})},cancel:function(){var e=this;this.$isShowTip("system","system_usermanagement","确定取消吗？",function(){e.$layer.close(e.layerid)},this)},__getConfig:function(e){var t=this;Object(n.a)(e).then(function(e){t.formData.fail_time=e.data.fail_time,t.formData.fail_count=e.data.fail_count}).catch(function(e){})},__setConfig:function(e){var t=this;Object(n.c)(e).then(function(e){t.$message({type:"success",message:"设置成功"}),t.$layer.close(t.layerid)}).catch(function(e){})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"system-usermanagement-login_config"},[a("mu-form",{ref:"system_usermanagement_login_config",staticClass:"mu-demo-form",attrs:{model:e.formData,"label-position":e.labelPosition,"label-width":"100"}},[a("mu-form-item",{attrs:{prop:"fail_count",label:"限制次数",rules:e.fail_countRules}},[a("mu-text-field",{attrs:{"max-length":50,type:"number"},model:{value:e.formData.fail_count,callback:function(t){e.$set(e.formData,"fail_count",t)},expression:"formData.fail_count"}})],1),e._v(" "),a("mu-form-item",{attrs:{prop:"fail_time",label:"限制时间",rules:e.fail_timeRules}},[a("mu-select",{attrs:{"full-width":""},model:{value:e.formData.fail_time,callback:function(t){e.$set(e.formData,"fail_time",t)},expression:"formData.fail_time"}},e._l(e.dropDownData.fail_time,function(e){return a("mu-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"form-beizhu"},[a("p",[e._v("备注：")]),a("p",[e._v("\n      (1).限制次数：限制登录失败的次数"),a("br"),e._v("\n      (2).限制时间：超过限制的登录失败次数后多久才能登录的时间\n    ")])]),e._v(" "),a("mu-form-item",[a("mu-button",{attrs:{color:"primary",small:""},on:{click:e.submitEdit}},[e._v("修改")]),e._v(" "),a("mu-button",{attrs:{small:""},on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var l=a("C7Lr")(i,r,!1,function(e){a("AJR8")},"data-v-01fa9c96",null).exports,o=a("3cXf"),m=a.n(o),u={name:"system_usermanagement_add",data:function(){var e=this;return{labelPosition:"right",visibility:!1,real_nameRules:[{validate:function(e){return!!e},message:"用户名不能为空"},{validate:function(t){return e.$validates.nameReg.test(t)},message:"用户名只能为字母、数字或下划线,且不能用下划线开头,长度3-16位"}],show_nameRules:[{validate:function(e){return!!e},message:"用户昵称不能为空"},{validate:function(e){return e.length>1&&e.length<9},message:"用户昵称长度为2-8位"}],editPasswordRules:[{validate:function(t){return!t||e.$validates.passwordReg.test(t)},message:"密码格式不正确"}],passwordRules:[{validate:function(e){return!!e},message:"密码不能为空"},{validate:function(t){return e.$validates.passwordReg.test(t)},message:"密码格式不正确"}],formData:{id:"",real_name:"",show_name:"",password:""}}},props:{layer_data:{type:[Object,Array,Number],default:function(){return{}}},isAdd:{type:Boolean,default:!0},layerid:{type:String}},created:function(){this.isAdd||(this.formData.id=this.layer_data.id,this.formData.real_name=this.layer_data.real_name,this.formData.show_name=this.layer_data.show_name)},methods:{submitAdd:function(){var e=this;this.$refs.system_usermanagement_add.validate().then(function(t){t&&e.$isShowTip("system","system_usermanagement","确定添加吗？",function(){var t=JSON.parse(m()(e.formData));t.password=e.$md5(e.formData.password),e.__addUser(t)},e)})},submitEdit:function(){var e=this;this.$refs.system_usermanagement_add.validate().then(function(t){t&&e.$isShowTip("system","system_usermanagement","确定修改吗?",function(){var t=JSON.parse(m()(e.formData));e.formData.password&&(t.password=e.$md5(e.formData.password)),e.__editUser(t)},e)})},cancel:function(){var e=this;this.$isShowTip("system","system_usermanagement","确定取消吗？",function(){e.$layer.close(e.layerid)},this)},__addUser:function(e){var t=this;Object(s.a)(e).then(function(e){t.$message({type:"success",message:"添加成功"}),t.$layer.close(t.layerid),t.$parent.$refs.system_usermanagement_table.reload()}).catch(function(e){})},__editUser:function(e){var t=this;Object(s.c)(e).then(function(e){t.$message({type:"success",message:"修改成功"}),t.$layer.close(t.layerid),t.$parent.$refs.system_usermanagement_table.reload()}).catch(function(e){})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"system-usermanagement-add"},[a("mu-form",{ref:"system_usermanagement_add",staticClass:"mu-demo-form",attrs:{model:e.formData,"label-position":e.labelPosition,"label-width":"100"}},[e.isAdd?a("mu-form-item",{attrs:{prop:"real_name",label:"用户名",rules:e.real_nameRules}},[a("mu-text-field",{attrs:{"max-length":50},model:{value:e.formData.real_name,callback:function(t){e.$set(e.formData,"real_name",t)},expression:"formData.real_name"}})],1):e._e(),e._v(" "),a("mu-form-item",{attrs:{prop:"show_name",label:"用户昵称",rules:e.show_nameRules}},[a("mu-text-field",{attrs:{"max-length":50},model:{value:e.formData.show_name,callback:function(t){e.$set(e.formData,"show_name",t)},expression:"formData.show_name"}})],1),e._v(" "),a("mu-form-item",{attrs:{prop:"password",label:"密码",rules:e.isAdd?e.passwordRules:e.editPasswordRules}},[a("mu-text-field",{attrs:{"action-icon":e.visibility?"visibility_off":"visibility","action-click":function(){return e.visibility=!e.visibility},type:e.visibility?"text":"password","max-length":50},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1),e._v(" "),a("mu-form-item",[e.isAdd?a("mu-button",{attrs:{color:"primary",small:""},on:{click:e.submitAdd}},[e._v("添加")]):e._e(),e._v(" "),e.isAdd?e._e():a("mu-button",{attrs:{color:"primary",small:""},on:{click:e.submitEdit}},[e._v("修改")]),e._v(" "),a("mu-button",{attrs:{small:""},on:{click:e.cancel}},[e._v("取消")])],1),e._v(" "),a("div",{staticClass:"form-beizhu"},[a("p",[e._v("备注：")]),e._v(" "),a("p",[e._v("\n        (1).用户昵称用于用户名称的显示\n        "),a("br"),e._v("(2).密码至少包含大小写字母、数字、特殊字符(~!@#$%^&*()_-+,.)中的三种,且长度为8-24位\n      ")])])],1)],1)},staticRenderFns:[]};var d=a("C7Lr")(u,c,!1,function(e){a("gyvB")},"data-v-d9bb1bd4",null).exports,f={name:"system_usermanagement_reset_super_pass",data:function(){var e=this;return{visibility:!1,labelPosition:"right",passwordRules:[{validate:function(e){return!!e},message:"密码不能为空"},{validate:function(t){return e.$validates.passwordReg.test(t)},message:"密码格式不正确"}],formData:{password:""}}},props:{layerid:{type:String}},methods:{submitEdit:function(){var e=this;this.$refs.system_usermanagement_reset_super_pass.validate().then(function(t){t&&e.$isShowTip("system","system_usermanagement","确定重置吗?",function(){var t=JSON.parse(m()(e.formData));t.password=e.$md5(e.formData.password),e.__resetSuperpass(t)},e)})},cancel:function(){var e=this;this.$isShowTip("system","system_usermanagement","确定取消吗？",function(){e.$layer.close(e.layerid)},this)},__resetSuperpass:function(e){var t=this;Object(s.e)(e).then(function(e){t.$message({type:"success",message:"重置成功"}),t.$layer.close(t.layerid)}).catch(function(e){})}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"system-usermanagement-reset_super_pass"},[a("mu-form",{ref:"system_usermanagement_reset_super_pass",staticClass:"mu-demo-form",attrs:{model:e.formData,"label-position":e.labelPosition,"label-width":"100"}},[a("mu-form-item",{attrs:{prop:"password",label:"新密码",rules:e.passwordRules}},[a("mu-text-field",{attrs:{"action-icon":e.visibility?"visibility_off":"visibility","action-click":function(){return e.visibility=!e.visibility},type:e.visibility?"text":"password","max-length":50},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1),e._v(" "),a("div",{staticClass:"form-beizhu"},[e._v("\n      备注：密码至少包含大小写字母、数字、特殊字符(~!@#$%^&*()_-+,.)中的三种,且长度为8-24位\n    ")]),e._v(" "),a("mu-form-item",[a("mu-button",{attrs:{color:"primary",small:""},on:{click:e.submitEdit}},[e._v("修改")]),e._v(" "),a("mu-button",{attrs:{small:""},on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var p=a("C7Lr")(f,_,!1,function(e){a("Ol30")},"data-v-7411f955",null).exports,h={data:function(){return{url:"/user/list",type:"get",level:1,cloumns:[{type:"selection",fixed:"left"},{type:"index",label:"序号",second_head:{type:"index",width:"60px",label:" ",indexMethod:function(e){return e+1}}},{label:"用户昵称",sortable:!0,prop:"show_name",second_head:{prop:"show_name",width:"200px",templateHeadName:"show_name_head"}},{label:"用户名",sortable:!0,prop:"real_name",second_head:{prop:"real_name",width:"200px",templateHeadName:"real_name_head"}},{label:"创建时间",prop:"ctime",sortable:!0,second_head:{width:"200px",templateHeadName:"ctime_head",prop:"ctime"}},{label:"最后登录时间",prop:"last_login_time",sortable:!0,second_head:{width:"200px",templateHeadName:"last_login_time_head",prop:"last_login_time"}},{label:"操作",second_head:{label:"",minWidth:"100px",isTemplate:!0,templateName:"operation"}}],tableHeadShow:!0,params:{page:1,limit:10,real_name:"",show_name:"",ctime:"",last_login_time:""},pageParams:{layout:"total, sizes, prev, pager, next, jumper",pageAlign:"left",pageSizes:[10,20,30]},selectData:[]}},activated:function(){this.level=sessionStorage.getItem("level")},methods:{reload:function(){this.$refs.system_usermanagement_table.reload()},search:function(){this.params.page=1,this.reload()},selectChange:function(e){this.selectData=e},loginConfig:function(){this.$layer.iframe({content:{content:l,parent:this,data:{}},area:["400px","auto"],title:"登录设置",shadeClose:!1})},resetSuperPass:function(){this.$layer.iframe({content:{content:p,parent:this,data:{}},area:["500px","auto"],title:"重置超级管理员密码",shadeClose:!1})},add:function(){this.$layer.iframe({content:{content:d,parent:this,data:{isAdd:!0}},area:["500px","auto"],title:"添加用户信息",shadeClose:!1})},edit:function(e){this.$layer.iframe({content:{content:d,parent:this,data:{isAdd:!1,layer_data:e}},area:["500px","auto"],title:"修改用户信息",shadeClose:!1})},del:function(e){var t=this,a="";if(Array.isArray(e)){if(this.$tools.isArrayNull(e))return void this.$message({type:"error",message:"请选择需要删除的选项!"});a=this.$tools.mergeId(e)}else a=e.id.toString();this.$isShowTip("system","system_usermanagement","确定删除吗?",function(){t.__delUser({id:a})},this)},__delUser:function(e){var t=this;Object(s.b)(e).then(function(e){t.$message({type:"success",message:"删除成功"}),t.reload()}).catch(function(e){})}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"system-usermanagement"},[a("g-el-table",{ref:"system_usermanagement_table",attrs:{tableHeadShow:e.tableHeadShow,url:e.url,type:e.type,cloumns:e.cloumns,params:e.params,pageParams:e.pageParams},on:{selectChange:e.selectChange},scopedSlots:e._u([{key:"table_header",fn:function(){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.loginConfig}},[e._v("登录设置")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.add}},[e._v("增加")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.del(e.selectData)}}},[e._v("批量删除")]),e._v(" "),0==e.level?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.resetSuperPass()}}},[e._v("重置超级管理员密码")]):e._e()]},proxy:!0},{key:"operation",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.edit(t.data.row)}}},[e._v("编辑")])]}},{key:"show_name_head",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"请输入内容",maxLength:20},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.params.show_name,callback:function(t){e.$set(e.params,"show_name",t)},expression:"params.show_name"}})]}},{key:"real_name_head",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"请输入内容",maxLength:20},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.params.real_name,callback:function(t){e.$set(e.params,"real_name",t)},expression:"params.real_name"}})]}},{key:"ctime_head",fn:function(t){return[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",size:"mini",placeholder:"选择日期"},on:{change:e.search},model:{value:e.params.ctime,callback:function(t){e.$set(e.params,"ctime",t)},expression:"params.ctime"}})]}},{key:"last_login_time_head",fn:function(t){return[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",size:"mini",placeholder:"选择日期"},on:{change:e.search},model:{value:e.params.last_login_time,callback:function(t){e.$set(e.params,"last_login_time",t)},expression:"params.last_login_time"}})]}}])})],1)},staticRenderFns:[]},y=a("C7Lr")(h,v,!1,null,null,null);t.default=y.exports},Ol30:function(e,t){},gyvB:function(e,t){}});
//# sourceMappingURL=11.6949fce00843166cd008.js.map