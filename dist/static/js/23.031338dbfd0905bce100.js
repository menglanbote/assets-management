webpackJsonp([23],{AdVl:function(e,a){},VNqn:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("rVsN"),s=t.n(r),n=t("iqp0");var i={name:"assets_area_add",data:function(){return{labelPosition:"right",nameRules:[{validate:function(e){return!!e},message:"位置名称不能为空"}],addressRules:[{validate:function(e){return!!e},message:"详细位置不能为空"}],providerRules:[{validate:function(e){return!!e},message:"运营商不能为空"}],typeRules:[{validate:function(e){return!!e},message:"类型不能为空"}],formData:{id:"",name:"",address:"",provider:"",type:""}}},props:{layer_data:{type:[Object,Array,Number],default:function(){return{}}},select_data:{type:[Object,Array],default:function(){return{}}},isAdd:{type:Boolean,default:!0},layerid:{type:String}},created:function(){this.isAdd||this.__editInfo()},methods:{submitAdd:function(){var e=this;this.$refs.assets_area_add.validate().then(function(a){a&&e.$isShowTip("assets","assets_area","确定添加吗？",function(){e.__addArea(e.formData)},e)})},submitEdit:function(){var e=this;this.$refs.assets_area_add.validate().then(function(a){a&&e.$isShowTip("assets","assets_area","确定修改吗?",function(){e.__editArea(e.formData)},e)})},cancel:function(){var e=this;this.$isShowTip("assets","assets_area","确定取消吗？",function(){e.$layer.close(e.layerid)},this)},__editInfo:function(e){this.formData.id=this.layer_data.id,this.formData.address=this.layer_data.address,this.formData.name=this.layer_data.name,this.formData.provider=this.layer_data.provider,this.formData.type=this.layer_data.type},__addArea:function(e){var a,t=this;(a=e,Object(n.a)({url:"/address/add",data:a,type:"post"}).then(function(e){return s.a.resolve(e)}).catch(function(e){return s.a.reject(e)})).then(function(e){t.$message({type:"success",message:"添加成功"}),t.$layer.close(t.layerid),t.$parent.$refs.assets_area_table.reload()}).catch(function(e){})},__editArea:function(e){var a,t=this;(a=e,Object(n.a)({url:"/address/modify",data:a,type:"post"}).then(function(e){return s.a.resolve(e)}).catch(function(e){return s.a.reject(e)})).then(function(e){t.$message({type:"success",message:"修改成功"}),t.$layer.close(t.layerid),t.$parent.$refs.assets_area_table.reload()}).catch(function(e){})}}},o={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"assets-area-add"},[t("mu-form",{ref:"assets_area_add",staticClass:"mu-demo-form",attrs:{model:e.formData,"label-position":e.labelPosition,"label-width":"100"}},[t("mu-form-item",{attrs:{prop:"name",label:"位置名称",rules:e.nameRules}},[t("mu-text-field",{attrs:{"max-length":50},model:{value:e.formData.name,callback:function(a){e.$set(e.formData,"name",a)},expression:"formData.name"}})],1),e._v(" "),t("mu-form-item",{attrs:{prop:"address",label:"详细位置",rules:e.addressRules}},[t("mu-text-field",{attrs:{"max-length":50},model:{value:e.formData.address,callback:function(a){e.$set(e.formData,"address",a)},expression:"formData.address"}})],1),e._v(" "),t("mu-form-item",{attrs:{prop:"provider",label:"运营商",rules:e.providerRules}},[t("mu-select",{model:{value:e.formData.provider,callback:function(a){e.$set(e.formData,"provider",a)},expression:"formData.provider"}},e._l(e.select_data.provider,function(e){return t("mu-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),t("mu-form-item",{attrs:{prop:"type",label:"类型",rules:e.typeRules}},[t("mu-select",{model:{value:e.formData.type,callback:function(a){e.$set(e.formData,"type",a)},expression:"formData.type"}},e._l(e.select_data.type,function(e){return t("mu-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),t("mu-form-item",[e.isAdd?t("mu-button",{attrs:{color:"primary",small:""},on:{click:e.submitAdd}},[e._v("添加")]):e._e(),e._v(" "),e.isAdd?e._e():t("mu-button",{attrs:{color:"primary",small:""},on:{click:e.submitEdit}},[e._v("修改")]),e._v(" "),t("mu-button",{attrs:{small:""},on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var d=t("C7Lr")(i,o,!1,function(e){t("AdVl")},"data-v-2021497a",null).exports,l={data:function(){return{url:"/address/list",type:"get",cloumns:[{type:"selection",fixed:"left"},{type:"index",label:"序号",second_head:{type:"index",width:"60px",label:" ",indexMethod:function(e){return e+1}}},{label:"位置名称",sortable:!0,prop:"name",second_head:{minWidth:"200px",prop:"name",templateHeadName:"name_head"}},{label:"详细位置",sortable:!0,prop:"address",second_head:{minWidth:"200px",prop:"address",templateHeadName:"address_head"}},{label:"运营商",prop:"provider",sortable:!0,second_head:{minWidth:"150px",isTemplate:!0,templateName:"provider",templateHeadName:"provider_head",prop:"provider"}},{label:"类型",prop:"type",sortable:!0,second_head:{minWidth:"150px",isTemplate:!0,templateName:"type",templateHeadName:"type_head",prop:"type"}},{label:"操作",second_head:{label:"",minWidth:"200px",isTemplate:!0,templateName:"operation"}}],tableHeadShow:!0,tableParams:{},params:{page:1,limit:10,name:"",address:"",provider:"",type:""},pageParams:{layout:"total, sizes, prev, pager, next, jumper",pageAlign:"left",pageSizes:[10,20,30]},provider:{provider:[{id:1,name:"电信"},{id:2,name:"联通"},{id:3,name:"移动"}],type:[{id:1,name:"内部机房"},{id:2,name:"外部机房"}]},selectData:[]}},methods:{reload:function(){this.$refs.assets_area_table.reload()},search:function(){this.params.page=1,this.reload()},selectChange:function(e){this.selectData=e},add:function(){this.$layer.iframe({content:{content:d,parent:this,data:{select_data:this.provider}},area:["500px","auto"],title:"添加资产位置",shadeClose:!1})},edit:function(e){this.$layer.iframe({content:{content:d,parent:this,data:{layer_data:e,select_data:this.provider,isAdd:!1}},area:["500px","auto"],title:"修改资产位置",shadeClose:!1})},del:function(e){var a=this;this.$isShowTip("assets","assets_area","确定删除吗?",function(){a.__delArea({id:e.id})},this)},__delArea:function(e){var a,t=this;(a=e,Object(n.a)({url:"/address/del",data:a,type:"post"}).then(function(e){return s.a.resolve(e)}).catch(function(e){return s.a.reject(e)})).then(function(e){t.$message({type:"success",message:"删除成功"}),t.reload()}).catch(function(e){})}}},p={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"assets-area"},[t("g-el-table",{ref:"assets_area_table",attrs:{tableHeadShow:e.tableHeadShow,url:e.url,type:e.type,cloumns:e.cloumns,params:e.params,pageParams:e.pageParams,tableParams:e.tableParams},on:{selectChange:e.selectChange},scopedSlots:e._u([{key:"table_header",fn:function(){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.add}},[e._v("添加位置信息")])]},proxy:!0},{key:"operation",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.edit(a.data.row)}}},[e._v("修改")]),e._v(" "),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.del(a.data.row)}}},[e._v("删除")])]}},{key:"name_head",fn:function(a){return[t("el-input",{attrs:{maxLength:20,size:"mini",placeholder:"请输入内容"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.search(a)}},model:{value:e.params.name,callback:function(a){e.$set(e.params,"name",a)},expression:"params.name"}})]}},{key:"address_head",fn:function(a){return[t("el-input",{attrs:{maxLength:20,size:"mini",placeholder:"请输入内容"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.search(a)}},model:{value:e.params.address,callback:function(a){e.$set(e.params,"address",a)},expression:"params.address"}})]}},{key:"provider",fn:function(a){return[1==a.data.row.provider?t("div",[e._v("电信")]):2==a.data.row.provider?t("div",[e._v("联通")]):3==a.data.row.provider?t("div",[e._v("移动")]):e._e()]}},{key:"provider_head",fn:function(a){return[t("el-select",{attrs:{clearable:"",size:"mini",placeholder:"请选择"},on:{change:e.search},model:{value:e.params.provider,callback:function(a){e.$set(e.params,"provider",a)},expression:"params.provider"}},e._l(e.provider.provider,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)]}},{key:"type",fn:function(a){return[1==a.data.row.type?t("div",[e._v("内部机房")]):2==a.data.row.type?t("div",[e._v("外部机房")]):e._e()]}},{key:"type_head",fn:function(a){return[t("el-select",{attrs:{clearable:"",size:"mini",placeholder:"请选择"},on:{change:e.search},model:{value:e.params.type,callback:function(a){e.$set(e.params,"type",a)},expression:"params.type"}},e._l(e.provider.type,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)]}}])})],1)},staticRenderFns:[]},c=t("C7Lr")(l,p,!1,null,null,null);a.default=c.exports}});
//# sourceMappingURL=23.031338dbfd0905bce100.js.map