webpackJsonp([12],{P666:function(e,t){},d3QB:function(e,t){},vcvD:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("rVsN"),n=a.n(i),s=a("iqp0");var r={name:"system_authorization_online_register",data:function(){return{labelPosition:"right",keyRules:[{validate:function(e){return!!e},message:"序列号不能为空"}],formData:{key:""}}},props:{layerid:{type:String}},methods:{submit:function(){var e=this;this.$refs.authorization_online_register.validate().then(function(t){t&&e.$isShowTip("system","system_authorization","确定提交吗？",function(){e.__onlineRegister(e.formData)},e)})},clear:function(){var e=this;this.$isShowTip("system","system_authorization","确定取消吗？",function(){e.$layer.close(e.layerid)},this)},__onlineRegister:function(e){var t=this;(function(e){return Object(s.a)({url:"/auth/online",data:e,type:"post"}).then(function(e){return n.a.resolve(e)}).catch(function(e){return n.a.reject(e)})})(e).then(function(e){t.$message({type:"success",message:"注册成功"}),t.$layer.close(t.layerid)}).catch(function(e){})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"authorization-online_register-wrap"},[a("mu-form",{ref:"authorization_online_register",staticClass:"mu-demo-form",attrs:{model:e.formData,"label-position":e.labelPosition,"label-width":"60"}},[a("mu-form-item",{attrs:{prop:"key",label:"序列号",rules:e.keyRules}},[a("mu-text-field",{attrs:{"max-length":50,placeholder:"请输入序列号"},model:{value:e.formData.key,callback:function(t){e.$set(e.formData,"key",t)},expression:"formData.key"}})],1),e._v(" "),a("mu-form-item",[a("mu-button",{attrs:{color:"primary",small:""},on:{click:e.submit}},[e._v("确定")]),e._v(" "),a("mu-button",{attrs:{small:""},on:{click:e.clear}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var l=a("C7Lr")(r,o,!1,function(e){a("d3QB")},"data-v-6553040c",null).exports,c={name:"system_authorization_offline_register",data:function(){return{fileList:[],fileName:"",fileSize:"",fileSizeExceed:!1}},created:function(){},methods:{selectFile:function(){this.$refs.upload.click()},fileChange:function(){var e=this.$refs.upload.files;this.fileSize=e[0].size,this.fileSizeExceed=this.fileSize>536870912,this.fileList=e,this.fileName=e[0].name},submitUpload:function(){var e=new FormData;e.append("file",this.fileList[0]);var t=(new Date).getTime()/1e3|0;e.append("now_time",t),this.__offlineRegister(e)},__offlineRegister:function(e){var t=this;(function(e){return Object(s.a)({url:"/auth/offline",data:e,contentType:!1,processData:!1,type:"post"}).then(function(e){return n.a.resolve(e)}).catch(function(e){return n.a.reject(e)})})(e).then(function(e){console.log(e),t.$message({type:"success",message:"上传成功"})}).catch(function(e){})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"system-authorization-offline_register"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("请选择要上传的文件")]),e._v(" "),a("div",{staticClass:"authorization-offline_register-wrap"},[a("input",{ref:"upload",staticClass:"offline_register-input",attrs:{type:"file",accept:".key"},on:{change:e.fileChange}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.selectFile}},[e._v("选取文件")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.fileList.length>0&&!e.fileSizeExceed,expression:"fileList.length > 0 && !fileSizeExceed"}],staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.fileList.length>0&&!e.fileSizeExceed,expression:"fileList.length > 0 && !fileSizeExceed"}],staticClass:"selectFileSuccess"},[a("i",{staticClass:"el-icon-document"}),e._v("\n      "+e._s(e.fileName)+"\n      "),a("i",{staticClass:"el-icon-check icon-success-style"})]),e._v(" "),e.fileSizeExceed?a("div",{staticClass:"selectFileError"},[a("i",{staticClass:"el-icon-info icon-error-style"}),e._v("上传文件不能大于512M\n    ")]):e._e()],1)],1)},staticRenderFns:[]};var m=a("C7Lr")(c,u,!1,function(e){a("P666")},"data-v-5d54c812",null).exports,p={data:function(){return{url:"/auth/list",type:"get",cloumns:[{type:"selection",fixed:"left"},{type:"index",label:"序号",second_head:{type:"index",width:"60px",label:" ",indexMethod:function(e){return e+1}}},{label:"模块名称",sortable:!0,prop:"product_name",second_head:{minWidth:"200px",prop:"product_name",templateHeadName:"product_name_head"}},{label:"适配平台版本号",sortable:!0,prop:"product_m_version",second_head:{minWidth:"100px",prop:"product_m_version",templateHeadName:"product_m_version_head"}},{label:"模块版本号",sortable:!0,prop:"product_c_version",second_head:{minWidth:"100px",prop:"product_c_version",templateHeadName:"product_c_version_head"}},{label:"产品数量",prop:"number",sortable:!0,second_head:{minWidth:"100px",prop:"number",templateHeadName:"number_head"}},{label:"开始时间",prop:"stime",sortable:!0,second_head:{minWidth:"200px",templateHeadName:"stime_head",prop:"stime"}},{label:"终止时间",prop:"etime",sortable:!0,second_head:{minWidth:"200px",templateHeadName:"etime_head",prop:"etime"}}],tableHeadShow:!0,params:{page:1,limit:10,product_m_version:"",product_name:"",number:"",etime:"",stime:""},pageParams:{layout:"total, sizes, prev, pager, next, jumper",pageAlign:"left",pageSizes:[10,20,30]}}},methods:{reload:function(){this.$refs.system_authorization_table.reload()},search:function(){this.params.page=1,this.reload()},onLineRegister:function(){this.$layer.iframe({content:{content:l,parent:this,data:{}},area:["500px","auto"],title:"产品在线注册",shadeClose:!1})},offLineRegister:function(){this.$layer.iframe({content:{content:m,parent:this,data:{}},area:["500px","200px"],title:"产品离线注册",shadeClose:!1})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"system-authorization"},[a("g-el-table",{ref:"system_authorization_table",attrs:{tableHeadShow:e.tableHeadShow,url:e.url,type:e.type,cloumns:e.cloumns,params:e.params,pageParams:e.pageParams},scopedSlots:e._u([{key:"table_header",fn:function(){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onLineRegister}},[e._v("在线授权注册")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.offLineRegister}},[e._v("离线授权注册")])]},proxy:!0},{key:"product_name_head",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"请输入内容",maxLength:20},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.params.product_name,callback:function(t){e.$set(e.params,"product_name",t)},expression:"params.product_name"}})]}},{key:"product_m_version_head",fn:function(e){}},{key:"product_c_version_head",fn:function(e){}},{key:"number_head",fn:function(e){}},{key:"stime_head",fn:function(t){return[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",size:"mini",placeholder:"选择日期","value-format":"yyyy-MM-dd"},on:{change:e.search},model:{value:e.params.stime,callback:function(t){e.$set(e.params,"stime",t)},expression:"params.stime"}})]}},{key:"etime_head",fn:function(t){return[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",size:"mini",placeholder:"选择日期","value-format":"yyyy-MM-dd"},on:{change:e.search},model:{value:e.params.etime,callback:function(t){e.$set(e.params,"etime",t)},expression:"params.etime"}})]}}])})],1)},staticRenderFns:[]},f=a("C7Lr")(p,d,!1,null,null,null);t.default=f.exports}});
//# sourceMappingURL=12.df73f0f008306ed8b5fb.js.map